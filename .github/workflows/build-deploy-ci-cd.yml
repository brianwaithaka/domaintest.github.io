name: Continuous Integration / Continuous Deployment to GitHub Pages

on:
  push:
    branches:
      - master  

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check Recent Updates in Repo
        uses: actions/checkout@v3

      - name: Check/Store Cached Dependencies
        uses: actions/cache@v3
          with:
            path: vendor/bundle
            key: ${{ runner.os }}-gems-${{ hashFiles('**/Gemfile.lock') }}
            restore-keys: |
              ${{ runner.os }}-gems-

      - name: Deploy Site to Github Pages
        uses: jeffreytse/jekyll-deploy-action@v0.4.0
        with:
          provider: 'github'
          token: ${{ secrets.GITHUB_TOKEN }} # It's your Personal Access Token(PAT)
          repository: ''             # Default is current repository
          branch: 'gh-pages'         # Default is gh-pages for github provider
          jekyll_src: './'           # Default is root directory
          jekyll_cfg: '_config.yml'

          uses: peaceiris/actions-gh-pages@v3
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
            publish_dir: ./_site
            publish_branch: gh-pages
